{"version":3,"sources":["webpack:///./src/app/trackgarbagetruck/trackgarbagetruck.module.ts","webpack:///./src/app/trackgarbagetruck/trackgarbagetruck.page.html","webpack:///./src/app/trackgarbagetruck/trackgarbagetruck.page.scss","webpack:///./src/app/trackgarbagetruck/trackgarbagetruck.page.ts"],"names":[],"mappings":"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","file":"trackgarbagetruck-trackgarbagetruck-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TrackgarbagetruckPage } from './trackgarbagetruck.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TrackgarbagetruckPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [TrackgarbagetruckPage]\n})\nexport class TrackgarbagetruckPageModule {}\n","module.exports = \"<ion-header >\\n  <ion-toolbar color=\\\"tertiary\\\">\\n    <ion-buttons>\\n    <ion-button (click)=\\\"openMenu()\\\" style=\\\"color:white;\\\"><ion-icon name=\\\"menu\\\"></ion-icon></ion-button>\\n    <ion-back-button style=\\\"color:white;\\\"></ion-back-button>\\n    <ion-title id=\\\"title\\\" style=\\\"color:white;\\\">Track Garbage Truck</ion-title>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n<div style=\\\"border: 2px; border-style: solid;\\\" id=\\\"map_canvas\\\">\\n    <ion-icon name=\\\"refresh-circle\\\" size=\\\"large\\\" color=\\\"tertiary\\\" (click)=\\\"refreshMap()\\\"></ion-icon>\\n  </div>\\n\\n</ion-content>\"","module.exports = \"#map_canvas {\\n  height: 98%; }\\n\"","import { Component, OnInit } from '@angular/core';\nimport { AlertController,MenuController, NavController } from '@ionic/angular';\nimport { ActivatedRoute,Router,NavigationEnd } from '@angular/router';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { GoogleMaps, GoogleMap, Environment, Marker, MarkerOptions, GoogleMapOptions } from '@ionic-native/google-maps/ngx';\nimport { latLng, Bounds } from 'leaflet';\n\n@Component({\n  selector: 'app-trackgarbagetruck',\n  templateUrl: './trackgarbagetruck.page.html',\n  styleUrls: ['./trackgarbagetruck.page.scss'],\n})\nexport class TrackgarbagetruckPage implements OnInit {\n\n  public map: GoogleMap;\n  markerpostition:any[]=[];\n  constructor(private route: ActivatedRoute,\n    private alertCtrl:AlertController,\n    private menu:MenuController,\n    public fs: AngularFirestore,\n    private navCtl : NavController,\n    ) \n    {\n      this.loadGarbageTruck();\n      setTimeout(() => {     \n        this.loadMap();         \n    }, 2000);\n    }\n\n    intervalStatus: any;\n    ngOnInit() {\n      this.intervalStatus = setInterval(() => {\n        this.refreshMap();\n      }, 7000);\n    }\n\n    ionViewWillLeave(){\n      console.log(\"Leave view\");\n      clearInterval(this.intervalStatus);\n    }\n\n  openMenu(){\n    this.menu.toggle('myMenu');\n  }\n\n  async alert(header:any,message:any)\n  {\n    const alert= await this.alertCtrl.create(\n      {\n       header:header,\n       message:message,\n       buttons:['OK'], \n      }\n    );\n    alert.present();\n  }\n\n  lat: number;\n  longitude: number;\n  routeTo: any;\n  routeFrom: any;\n  vehNo: any;\n\n  garbageTruckData:any[]=[];\n\n  refreshMap(){\n    console.log(\"refresh map\");\n    this.map.clear();\n    for(let data of this.markers)\n    {\n      this.garbageTruckData.pop(); \n    }\n    this.loadGarbageTruck();\n      setTimeout(() => {     \n        this.loadMapRefresh();         \n    }, 1000);\n       //this.loadMapRefresh();         \n  }\n \n  loadGarbageTruck(){\n    this.fs.collection('/t_garbage_trucks').get().subscribe(res=>\n      {\n        res.forEach((doc:any)=>\n      {\n        this.garbageTruckData.push({\n          position:{lng:doc.data().longitude,lat:doc.data().latitude},\n          title: doc.data().from+' - '+doc.data().to+`<br>`+\"Type: \"+doc.data().type,\n          draggable: true,\n          vehNo : doc.data().vehicleno,\n        })\n      });\n      })\n      console.log(\"Values \"+this.garbageTruckData);\n  }\n\n  markers:Marker [];\n\n  loadMap(){    \n    Environment.setEnv({\n      'API_KEY_FOR_BROWSER_RELEASE':'AIzaSyCSBKG782bLxr6qGnsoRCmu4kbKF3iahCs',\n      'API_KEY_FOR_BROWSER_DEBUG':'AIzaSyCSBKG782bLxr6qGnsoRCmu4kbKF3iahCs'\n    });\n    \n    let mapOptions: GoogleMapOptions = {\n      camera: {\n         zoom: 15,\n         tilt: 30\n       }\n    };\n\n    this.map = GoogleMaps.create('map_canvas', mapOptions);\n\n      var bounds = [];\n      // let markers:Marker []= this.garbageTruckData.map((options)=>{\n      this.markers = this.garbageTruckData.map((options)=>{  \n      bounds.push(options.position);\n        return this.map.addMarkerSync(options);\n      });\n  \n      // Set a camera position that includes all markers.\n      this.map.moveCamera({\n        target: bounds\n      });\n\n       //this.markers[this.markers.length - 2].showInfoWindow();\n  }\n\n  loadMapRefresh(){    \n    Environment.setEnv({\n      'API_KEY_FOR_BROWSER_RELEASE':'AIzaSyCSBKG782bLxr6qGnsoRCmu4kbKF3iahCs',\n      'API_KEY_FOR_BROWSER_DEBUG':'AIzaSyCSBKG782bLxr6qGnsoRCmu4kbKF3iahCs'\n    });\n    \n    let mapOptions: GoogleMapOptions = {\n      camera: {\n         zoom: 15,\n         tilt: 30\n       }\n    };\n\n      var bounds = [];\n      this.markers = this.garbageTruckData.map((options)=>{  \n      bounds.push(options.position);\n        return this.map.addMarkerSync(options);\n      });\n  \n      this.map.moveCamera({\n        target: bounds\n      });\n     \n  }\n}"],"sourceRoot":""}